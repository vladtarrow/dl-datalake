[tool.ruff]
target-version = "py312"
line-length = 88
preview = true
unsafe-fixes = false
exclude = ["tests"]

[tool.ruff.lint]
select = ["ALL"]
ignore = ["PGH003", "E501"]
explicit-preview-rules = true
typing-modules = ["typing", "typing_extensions"]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.ruff.lint.per-file-ignores]
# "tests/**.py" = ["D", "S101", "ANN", "SLF001", "PLR2004", "INP001"] # Tests excluded globally
"research/**.py" = ["ALL"]
"src/dl_datalake/cli.py" = ["PLR0913", "FBT001", "FBT002", "UP045", "PLC0415"]
"src/dl_datalake/ingest/exchange_connector.py" = ["FBT001", "FBT002"]
"src/dl_datalake/storage/writer.py" = ["PLR0913"]

[tool.black]
line-length = 88
target-version = ["py312"]
skip-string-normalization = false
exclude = "tests"

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
addopts = [
    "--cov=src/dl_datalake",
    "--cov-report=term-missing",
    "--cov-report=html",
    "--cov-report=xml",
    # "--cov-fail-under=70",
    "--strict-markers",
    "-v"
]
markers = [
    "slow: marks tests as slow",
    "integration: marks tests as integration tests"
]
